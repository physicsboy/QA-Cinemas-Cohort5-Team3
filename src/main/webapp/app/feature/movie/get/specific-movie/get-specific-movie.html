<!--<link href="get-specific-movie.css" rel="stylesheet" media="screen">-->


<div ng-controller="getSpecificMovieController as movieCtrl">

    <div class="container-fluid">
        <div class=row>
            <div class="col-xs-12 col-sm-4 col-md-4 movie-poster">
                <div class="movie-poster" ng-repeat="poster in movieCtrl.movies.media | filter:{type:'POSTER'}">
                    <img src='{{poster.url}}' class="img-responsive">
                </div>
            </div>
            <!--Movie information-->
            <div class="col-xs-12 col-sm-4 col-md-4">
                <div id="text-box">
                    <div class="Logo"><h3> {{movieCtrl.movies.title}}<img ng-src="{{movieCtrl.movies.classification}}" id="rating"></h3></div>
                    <hr id="movie-line">
                    <div class="Sypnosis"><br>{{movieCtrl.movies.description}}</div>
                    <div class="Cast"><h3>Cast:</h3> {{movieCtrl.movies.cast}}</div>
                    <div class="MovieLength"><h3>Length:</h3> {{movieCtrl.movies.length}}</div>
                    <div class="Year"><h3>Release Date:</h3> {{movieCtrl.movies.year}}</div>
                </div>
				
                <div id="trailer-view"><a ui-sref="#trailerModal" data-toggle="modal" data-target="#trailerModal" id="trailer" class="btn btn-block btn-social btn-pinterest">
				<span class="fa fa-youtube-play" id="logo"></span> Watch "{{movieCtrl.movies.title}}" Trailer</a>
                </div>

		   </div>
            <!--Showings-->
            <div class="col-sm-4 col-md-4">
                <div>
                    <h2> Showings </h2>
                </div>
                <br/>

                <div ui-sref="payment({showingId:{{showing.id}}})" class="showingBox"
                     ng-repeat="showing in movieCtrl.showings | orderBy : 'dateShowing' ">
                    <div class="floating-box">
                        <h5>{{showing.dateShowing | date:' EEE '}}</h5>
                        <h5>{{showing.dateShowing | date: 'd MMM'}}</h5>
                        <h5>{{showing.dateShowing | date:'HH:mm '}}</h5>

                    </div>
                </div>
                <!--<div class="after-box"></div>-->
            </div>
        </div>
        <!--Trailer-->
        <div class="modal fade" id="trailerModal" tabindex="-1" role="dialog" aria-labelledby="myModal"
             ng-controller="getMediaController as mediaCtrl">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"
                                aria-hidden="true" ng-click="callPlayer('yt-player', 'stopVideo');">Ã—
                        </button>
                        <h4 class="modal-title">{{movieCtrl.movies.title}} Trailer</h4>
                    </div>
                    <div class="modal-body" id="yt-player"
                         ng-repeat="trailer in movieCtrl.movies.media | filter:{type:'TRAILER'}">
                        <iframe id='video' width="100%" height="700px" src="{{trailer.url}}" frameborder="0"
                                allowfullscreen></iframe>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function () {
        /* Get iframe src attribute value i.e. YouTube video url
         and store it in a variable */
        var url = $("#video").attr('src');

        /* Assign empty url value to the iframe src attribute when
         modal hide, which stop the video playing */
        $("#trailerModal").on('hide.bs.modal', function () {
            $("#video").attr('src', '');
        });

        /* Assign the initially stored url back to the iframe src
         attribute when modal is displayed again */
        $("#trailerModal").on('show.bs.modal', function () {
            $("#video").attr('src', url);
        });
    });
</script>


<style>

    #trailer{
        font-weight: bold;
        text-align: center;
    }

    #movie-line {
        margin-right: 20px;
        padding-top: 10px;
    }

    #rating{
        padding-left: 20px;
    }
    #text-box {
        /*padding-top: 10px;*/
        padding-bottom: 20px;
        padding-left: 20px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 1px;
    }

    #trailer-view {
        padding-top: 30px;
    }

    .movie-poster {
        max-width: 400px;
        display: table-cell;
        vertical-align: middle;
    }

    #trailerModal .modal-dialog {
        width: 70%;

        margin-right: auto;
        margin-left: auto;
        padding-top: 50px;
    }

    body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        margin-left: auto;
        margin-right: auto;
    }

    button.accordion {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        text-align: left;
        border: none;
        outline: none;
        transition: 0.4s;
    }

    /* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
    button.accordion.active, button.accordion:hover {
        background-color: #ddd;
    }

    /* Style the accordion panel. Note: hidden by default */
    div.panel {
        padding: 0 18px;
        background-color: white;
        display: none;
    }

    .floating-box {
        text-align: center;
        float: left;
        width: 125px;
        height: 100px;
        margin: 3px;
        border: 1px solid #9198a3;
        overflow: hidden;
        padding: .5em;
    }

    .floating-box:hover {
        opacity: 1.0;
        transition: transform 0.5s linear;
        border: 1px solid #3b485b;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
        filter: alpha(opacity=100); /* For IE8 and earlier */
        cursor: pointer;
    }

    .after-box {
        clear: left;
    }

    .Logo {
        padding-top: 10px;
    }

</style>
